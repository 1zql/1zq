javascript:ftb();function dxc(t,e,n){var a=CryptoJS.enc.Base64.parse(n),i=CryptoJS.enc.Base64.parse(e);return CryptoJS.AES.decrypt(t,i,{iv:a,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8)}function adjdl(b,w){for(t="",bs=b.split(","),ws=w.split(","),i=0;i<bs.length;i++)"n"==bs[i].substring(0,1)?style="color:red;font-weight:bold;":style="color:#a00;",t+='+<span style="'+style+'">'+bs[i]+"</span>("+ws[i]+"hz)";return t.slice(1)}function adjup(w){for(t="",ws=w.split(","),i=0;i<ws.length;i++)t+='+<span style="color:#a00;">'+ws[i]+"hz</span>";return t.slice(1)}function getStatus(){boxcar=gw/(gt+1),$.ajax({type:"GET",url:"/cgi-bin/DAL?oid=cellwan_status",dataType:"json",success:function(s){try{var e=dxc(s.content,localStorage.AesKey,s.iv);v=JSON.parse(e),b=!0,signal=v.Object[0]}catch(e){signal=s.Object[0]}for(vars=["Antenna_Status","NSA_PhyCellID","NSA_RFCN","NSA_Band","NSA_RSSI","NSA_RSRP","NSA_RSRQ","NSA_SINR","INTF_PhyCell_ID","INTF_RFCN","INTF_Cell_ID","INTF_RSRP","INTF_RSRQ","INTF_Current_Band","INTF_SINR","INTF_RSSI","INTF_Network_In_Use","INTF_Current_Access_Technology","INTF_Uplink_Bandwidth","INTF_Downlink_Bandwidth"],i=0;i<vars.length;i++)window[vars[i]]=signal[vars[i]];for(barGraph("rsrp",INTF_RSRP,-130,-60),barGraph("rsrq",INTF_RSRQ,-16,-3),barGraph("sinr",INTF_SINR,0,24),barGraph("nr5rsrp",NSA_RSRP,-130,-60),barGraph("nr5rsrq",NSA_RSRQ,-16,-3),barGraph("nr5sinr",NSA_SINR,0,24),cell_id=INTF_Cell_ID,rsrp=INTF_RSRP,rsrq=INTF_RSRQ,sinr=INTF_SINR,rssi=INTF_RSSI,nr5rsrp=NSA_RSRP,nr5rsrq=NSA_RSRQ,nr5sinr=NSA_SINR,nr5rssi=NSA_RSSI,$(".nr").toggle(""!=NSA_Band),console.log(INTF_Current_Access_Technology),enbid=Math.trunc(cell_id/256),pcc_ul_bw=5*(INTF_Uplink_Bandwidth-1),pcc_dl_bw=5*(INTF_Downlink_Bandwidth-1),Current_Band=adjdl(INTF_Current_Band,INTF_Downlink_Bandwidth),ul_txt=adjup(INTF_Uplink_Bandwidth),plmn=INTF_Network_In_Use.split("_")[3],"22201"==plmn&&(plmn="2221"),"22299"==plmn&&(plmn="22288"),"22250"==plmn&&6==enbid.length&&(plmn="22288"),link_lte="https://lteitaly.it/internal/map.php#bts="+plmn+"."+enbid,$("#lteitaly").attr("href",link_lte),"LTE-A"==INTF_Current_Access_Technology?$("#ca").parent().parent().css("border-color","red"):$("#ca").parent().parent().css("border-color","#bbb"),antenna=1==Antenna_Status?"INT":"EXT",dervars=["cell_id","sinr","rssi","rsrp","rsrq","nr5sinr","nr5rssi","nr5rsrp","nr5rsrq","ul_txt","enbid","INTF_Current_Access_Technology","Current_Band","antenna"],i=0;i<dervars.length;i++)$("#"+dervars[i]).html(window[dervars[i]])}})}function info(){ca_txt=INTF_Current_Band.split(",")[0]+" - PCI,EARFCN:"+INTF_PhyCell_ID+","+INTF_RFCN.split(",")[0],NSA_Band&&(ca_txt+="\n\nNSA PCI,RFCN: "+NSA_PhyCellID+","+NSA_RFCN),alert(ca_txt)}function barGraph(p,val,min,max){for(val>max&&(val=max),val<min&&(val=min),ap="a"+p,window[ap].unshift(val),window[ap].length>boxcar&&window[ap].pop(),html='<svg version="1.1" viewBox="0 0 '+gw+" "+gh+'" width="'+gw+'" height="'+gh+'" preserveAspectRatio="xMaxYMax slice" style="border:1px solid #ccc;padding:1px;margin-top:-6px;width: '+gw+'px;">',x=0;x<window[ap].length;x++)pax=(gt+1)*(x+1),pay=gh-1,pby=gh-(window[ap][x]-min)/(max-min)*gh,pc=(window[ap][x]-min)/(max-min)*100,pc<50?color="yellow":pc<85?color="green":color="orange",html+='<line x1="'+pax+'" y1="'+pay+'" x2="'+pax+'" y2="'+pby+'" stroke="'+color+'" stroke-width="'+gt+'"></line>';html+="</svg>",$("#b"+p).html(html)}function ftb(){$("body").prepend('<style>.clear{clear:both}.action{background-color:#448;padding:10px;border-radius:10px;color:#fff;font-weight:bolder;margin-right:5px;margin-left:5px}.action:hover{color:#fff}#cell_id,#enbid,#nr5rsrp,#nr5rsrq,#nr5rssi,#nr5sinr,#rsrp,#rsrq,#rssi,#sinr,#antenna{color:#b00;}.f{float:left;border:1px solid #bbb;border-radius:5px;padding:10px;line-height:2em;margin:5px}.f ul{margin:0;padding:0}.f ul li{display:inline;margin-right:5px;margin-left:5px}#enbid{font-weight:700;text-decoration:underline}.p{border-bottom:1px solid #ccc;width:auto;height:20px}.v{height:100%25;border-right:1px solid #ccc;padding-left:20px}</style><div style="display:block;overflow:auto"><div class="f">RSRP:<span id="rsrp"></span>dBm<div id="brsrp"></div>RSRQ:<span id="rsrq"></span>dB<div id="brsrq"></div>SINR:<span id="sinr"></span>dB<div id="bsinr"></div></div><div class="f nr">NR RSRP:<span id="nr5rsrp"></span>dBm<div id="bnr5rsrp"></div>NR RSRQ:<span id="nr5rsrq"></span>dB<div id="bnr5rsrq"></div>NR SINR:<span id="nr5sinr"></span>dB<div id="bnr5sinr"></div></div><div class="f"><ul><li id="INTF_Current_Access_Technology">Che la banda sia con te! Miononno &#9829;</li></ul></div><div class="f"><ul><li>ANT:<span id="antenna"></li></ul></div><div class="f"><ul><li>ENB ID:<a id="lteitaly" target="lteitaly" href="#"><span id="enbid">#</span></a></li><li>CELL ID:<span id="cell_id">#</span></li></ul></div><div class="f"><ul><li>BANDS:<span id="Current_Band"></span></li><li id="ul">UL:<span id="ul_txt"></span></li></ul></div><div class="f"><ul><li><a class="action" href="#" onclick="info()">INFO</a></li></ul></div></div>')}gw=500,gh=30,gt=3,signal="",version="zyxel 5103E-v2.0",[arsrp,arsrq,asinr,anr5rsrp,anr5rsrq,anr5sinr]=[[],[],[],[],[],[]],console.log("Code by Miononno - "+version),console.log("type: signal"),window.setInterval(getStatus,2e3);